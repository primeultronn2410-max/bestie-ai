<!DOCTYPE html>
<html>
<head>
  <title>Bestie</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body style="
  margin:0;
  background:black;
  color:white;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:sans-serif;
  text-align:center;
">

  <div>
    <h2>Bestie ðŸ’–</h2>
    <p id="status">Tap anywhere</p>
    <p id="heard" style="margin-top:15px;color:#00ffcc;"></p>
  </div>

<script>
let started = false;
let recognition;

// Setup speech recognition
const SpeechRecognition =
  window.SpeechRecognition || window.webkitSpeechRecognition;

recognition = new SpeechRecognition();
recognition.lang = "hi-IN";
recognition.continuous = false;

// When user speaks
recognition.onresult = (event) => {
  const text = event.results[0][0].transcript;
  document.getElementById("heard").innerText = "You said: " + text;
  document.getElementById("status").innerText = "Heard âœ…";
};

document.body.addEventListener("click", () => {
  if (started) return;
  started = true;

  document.getElementById("status").innerText = "Speakingâ€¦";

  const msg = new SpeechSynthesisUtterance(
    "Heyâ€¦ tum aa gaye."
  );

  msg.lang = "hi-IN";
  msg.rate = 0.95;
  msg.pitch = 1.1;

  // ðŸ”¥ Mic starts AFTER she finishes
  msg.onend = () => {
    document.getElementById("status").innerText = "Listeningâ€¦";
    recognition.start();
  };

  window.speechSynthesis.cancel();
  window.speechSynthesis.speak(msg);
});
</script>

</body>
</html>
